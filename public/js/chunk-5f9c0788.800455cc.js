(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f9c0788"],{1134:function(e,t,a){},"8e87":function(e,t,a){"use strict";a("1134")},c9e1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",[a("b-overlay",{attrs:{show:e.loading,"spinner-variant":"primary",rounded:"sm"}},[a("div",[a("div",{staticClass:"custom-search d-flex justify-content-between"},[a("b-form-group",[a("div",{staticClass:"d-flex align-items-center"},[a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],attrs:{variant:"outline-primary"},on:{click:function(t){return e.addModal()}}},[a("feather-icon",{staticClass:"mr-50",attrs:{icon:"PlusIcon"}}),a("span",{staticClass:"align-middle"},[e._v("Add")])],1)],1)]),a("b-form-group",[a("div",{staticClass:"d-flex align-items-center"},[a("b-input-group",[a("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"Search",type:"text"},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){return e.getData()}}},[a("feather-icon",{attrs:{icon:"SearchIcon"}})],1)],1)],1)],1)])],1),0==e.data.length?a("div",{staticClass:"text-center"},[a("p",{staticClass:"mb-2 pb-75"},[e._v("\n            No data to show\n          ")])]):e._e(),e.data.length>0?a("div",e._l(e.chunkedData,(function(t,n){return a("b-row",{key:n},[a("b-col",{attrs:{cols:"12"}},[a("b-card-group",{staticClass:"mb-0",attrs:{deck:""}},[e._l(t,(function(t,n){return a("b-card",{key:n,attrs:{"img-src":e.imagePath+t.image_filename,"img-alt":t.name,"img-top":"","no-body":""}},[a("b-card-body",[a("small",{staticClass:"text-muted"},[e._v(e._s(e.getProvince(t.province_id)))]),a("b-card-title",{staticStyle:{"margin-top":"5px"}},[e._v(e._s(t.name))]),a("b-card-text",[e._v("\n                      "+e._s(t.description)+"\n                    ")])],1),a("b-card-footer",[a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"btn-icon rounded-circle",attrs:{variant:"outline-primary"},on:{click:function(a){return e.editModal(t)}}},[a("feather-icon",{attrs:{icon:"Edit2Icon"}})],1),a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}}],staticClass:"btn-icon rounded-circle",staticStyle:{"margin-left":"5px"},attrs:{variant:"outline-danger"},on:{click:function(a){return e.deleteData(t)}}},[a("feather-icon",{attrs:{icon:"TrashIcon"}})],1),a("small",{staticClass:"text-muted ml-1"},[e._v("Last updated\n                      "+e._s(e._f("moment")(t.updated_at,"from","now"))+"\n                    ")])],1)],1)})),e._l(3-t.length,(function(e){return a("b-card",{key:e,attrs:{"no-body":""}})}))],2)],1)],1)})),1):e._e()])])],1),a("b-modal",{ref:"modal-input",attrs:{centered:"",title:e.modalTitle,"no-close-on-backdrop":!0}},[a("b-form",[a("b-form-group",[a("label",{attrs:{for:"province"}},[e._v("Province :")]),a("v-select",{attrs:{options:e.availableProvinces,reduce:function(e){return e.id},label:"name"},model:{value:e.params.province_id,callback:function(t){e.$set(e.params,"province_id",t)},expression:"params.province_id"}})],1),a("b-form-group",[a("label",{attrs:{for:"regionName"}},[e._v("Region Name :")]),a("b-form-input",{attrs:{id:"regionName",type:"text",placeholder:"Region Name"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),a("b-form-group",[a("label",{attrs:{for:"description"}},[e._v("Description :")]),a("b-form-textarea",{attrs:{id:"description",placeholder:"Description",rows:"3","no-resize":""},model:{value:e.params.description,callback:function(t){e.$set(e.params,"description",t)},expression:"params.description"}})],1),a("b-form-group",[a("label",{attrs:{for:"timezone"}},[e._v("Timezone :")]),a("b-form-radio-group",{staticClass:"spacer",attrs:{options:e.timezoneOptions},model:{value:e.params.timezone_offset,callback:function(t){e.$set(e.params,"timezone_offset",t)},expression:"params.timezone_offset"}})],1),a("b-form-group",[a("label",{attrs:{for:"image"}},[e._v("Image (Aspect Ratio 16:9):")]),a("vue-dropzone",{ref:"dropzone",attrs:{id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-file-added":e.dropzone_added}})],1)],1)],1)],1)},i=[],r=(a("7db0"),a("b0c0"),a("a4d3"),a("e01a"),a("ac1f"),a("1276"),a("9c7d")),o=a("2924"),s=a("9b03"),c=a("5fda"),l=a("01e3"),d=a("11de"),p=a("4797"),u=a("ccc0"),m=a("8226"),f=a("5e12"),h=a("5cce"),v=a("670f"),g=a("205f"),b=a("d6e4"),y=a("1947"),_=a("6197"),x=a("4968"),k=a("ba06"),z=a("a15b"),w=a("b28b"),B=a("aa59"),C=a("4918"),P=a("e009"),D=a("2ef0"),F=a.n(D),T=a("4a7a"),S=a.n(T),M=a("92c3"),R=a.n(M),A=(a("1e3f"),a("2bb3")),E={components:{vueDropzone:R.a,BFormTextarea:r["a"],VSelect:S.a,BFormRadioGroup:o["a"],BOverlay:s["a"],BAlert:c["a"],BSpinner:l["a"],BForm:d["a"],BFormInput:p["a"],BInputGroupAppend:u["a"],BFormGroup:m["a"],BInputGroup:f["a"],BCardGroup:h["a"],BCardFooter:v["a"],BCard:g["a"],BCardText:b["a"],BButton:y["a"],BCardBody:_["a"],BCardTitle:x["a"],BCardSubTitle:k["a"],BRow:z["a"],BCol:w["a"],BLink:B["a"],BImg:C["a"]},directives:{Ripple:P["a"]},filters:{uppercase:function(e){return e.toUpperCase()}},data:function(){return{dropzoneOptions:{url:"http://localhost",maxFilesize:2,maxFiles:1,autoProcessQueue:!1,thumbnailWidth:360,thumbnailHeight:202,addRemoveLinks:!1,acceptedFiles:"image/*"},dropzoneSelectedFile:null,query:{keyword:"",limit:15,page:1},modalTitle:"",availableProvinces:[],params:null,defaultParams:{name:"",province_id:0,description:"",image:null,timezone_offset:null},timezoneOptions:[{text:"GMT+7",value:25200},{text:"GMT+8",value:28800},{text:"GMT+9",value:32400}],loading:!0,data:[],imagePath:this.$imagePath}},computed:{chunkedData:function(){return F.a.chunk(this.data,3)}},created:function(){this.initDefaultParams(),this.getData(),this.getAvailableProvinces()},methods:{toastErrorMsg:A["d"],getData:function(){var e=this;this.loading=!0,this.$http.get("/regency",{params:this.query}).then((function(t){var a=t.data.data;a.length>0?e.data=a:e.query.keyword&&e.$toast({component:ToastificationContent,props:{title:"Error",icon:"AlertCircleIcon",text:"No data found with specified keyword",variant:"danger"}},{position:"top-center",timeout:6e3}),e.$nextTick((function(){e.loading=!1}))})).catch((function(t){if(t.response){var a=t.response.data.data;if(a)return e.toastErrorMsg(a)}return e.toastErrorMsg(t.message)}))},getAvailableProvinces:function(){var e=this;this.$http.get("/regency/getAvailableProvinces").then((function(t){e.availableProvinces=t.data.data})).catch((function(t){if(t.response){var a=t.response.data.data;if(a)return e.toastErrorMsg(a)}return e.toastErrorMsg(t.message)}))},getProvince:function(e){var t=this.availableProvinces.find((function(t){return t.id===e}));return t?t.name:""},initDefaultParams:function(){this.params=JSON.parse(JSON.stringify(this.defaultParams))},addModal:function(){var e=this;this.initDefaultParams(),this.modalTitle="Add Region",this.$refs["modal-input"].onOk=function(){return e.addData(e.params)},this.$refs["modal-input"].show(),this.$nextTick((function(){e.$refs.dropzone.removeAllFiles()}))},addData:function(e){var t=this;this.dropzoneSelectedFile&&(e.image=this.dropzoneSelectedFile.dataURL),this.$http.post("/regency",e).then((function(e){t.$refs["modal-input"].hide(),t.getData()})).catch((function(e){var a=e.response.data.data;t.toastErrorMsg(a)}))},editModal:function(e){var t=this;this.initDefaultParams(),this.modalTitle="Edit Region : ".concat(e.name),this.params.province_id=e.province_id,this.params.name=e.name,this.params.description=e.description,this.params.timezone_offset=e.timezone_offset,this.$refs["modal-input"].onOk=function(){return t.editData(e.id,t.params)},this.$refs["modal-input"].show(),this.$nextTick((function(){var a=e.image_filename.split(".").pop(),n={size:1,type:"image/".concat(a)},i=t.imagePath+e.image_filename;t.$refs.dropzone.removeAllFiles(),t.$refs.dropzone.manuallyAddFile(n,i),$(".dz-message").remove()}))},editData:function(e,t){var a=this;t.image=this.dropzoneSelectedFile.dataURL,t._method="PUT",this.$http.post("/regency/".concat(e),t).then((function(e){a.$refs["modal-input"].hide(),a.getData()})).catch((function(e){var t=e.response.data.data;a.toastErrorMsg(t)}))},deleteData:function(e){var t=this;this.$swal({title:"Are you sure?",text:"Regency ".concat(e.name," will be removed. All user with this Regency need to be updated with new Regency."),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(a){a.value&&t.$http.delete("/regency/".concat(e.id)).then((function(e){t.$swal({icon:"success",title:"Deleted!",text:"Regency has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.getData()})).catch((function(e){var a=e.response.data.data;t.toastErrorMsg(a)}))}))},dropzone_added:function(e){null!==this.dropzoneSelectedFile&&this.$refs.dropzone.removeFile(this.dropzoneSelectedFile),this.dropzoneSelectedFile=e}}},N=E,I=(a("8e87"),a("2877")),O=Object(I["a"])(N,n,i,!1,null,null,null);t["default"]=O.exports}}]);
//# sourceMappingURL=chunk-5f9c0788.800455cc.js.map